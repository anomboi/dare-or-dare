<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dares or Dares - Neon Rave</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0f0f0f;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
    }
    button:disabled {
      background-color: #555;
      cursor: not-allowed;
    }
    #dareDisplay {
      font-size: 1.5rem;
      margin: 20px 0;
      min-height: 60px;
    }
    .scoreboard {
      margin-top: 30px;
    }
    .bar {
      display: inline-block;
      margin: 0 5px;
      background: #ff0080;
      width: 20px;
      transition: height 0.3s ease;
    }
    select {
      padding: 5px;
      margin: 10px;
    }
  </style>
</head>
<body>
  <h1>ðŸŒˆ Dares or Dares - Neon Rave Edition ðŸŒˆ</h1>
  <div>
    <input id="playerInput" type="text" placeholder="Add player" />
    <button onclick="addPlayer()">Add</button>
    <input id="maxSkips" type="number" placeholder="Max skips" min="1" />
    <button onclick="startGame()">Start Game</button>
  </div>
  <div id="gameArea" style="display:none">
    <h2 id="currentPlayer"></h2>
    <select id="dareLevel">
      <option value="mild">Mild</option>
      <option value="spicy">Spicy</option>
      <option value="dangerous">Dangerous</option>
    </select><br/>
    <button id="nextBtn" onclick="nextDare()">Next</button>
    <button id="acceptBtn" onclick="acceptDare()" disabled>Accept</button>
    <button id="skipBtn" onclick="skipDare()" disabled>Skip (Penalty: 1 shot)</button>
    <div id="dareDisplay"></div>
    <h3>Dare History</h3>
    <ul id="dareHistory"></ul>
    <div class="scoreboard">
      <h3>Skip Count</h3>
      <div id="histogram"></div>
    </div>
  </div>

  <script>
    const players = [];
    const skips = {};
    let currentPlayerIndex = 0;
    let maxSkips = 3;

    const dareBanks = {
      mild: [
        "Do a little dance for 15 seconds.",
        "Give someone a compliment while looking deep into their eyes.",
        "Trade an item of clothing with someone.",
      ],
      spicy: [
        "Kiss someone on the neck.",
        "Do a sexy pose and let someone take a picture.",
        "Sit on someoneâ€™s lap for the next round.",
      ],
      dangerous: [
        "Let someone put their hand in your underwear for 3 rounds.",
        "Have an erection contest with someone â€“ first to react loses.",
        "Do a dry frottage with someone for 20 seconds.",
      ]
    };

    const usedDares = {
      mild: new Set(),
      spicy: new Set(),
      dangerous: new Set()
    };

    function addPlayer() {
      const input = document.getElementById('playerInput');
      const name = input.value.trim();
      if (name && !players.includes(name)) {
        players.push(name);
        skips[name] = 0;
        input.value = '';
      }
    }

    function startGame() {
      const skipLimitInput = document.getElementById('maxSkips').value;
      if (skipLimitInput) maxSkips = parseInt(skipLimitInput);
      if (players.length === 0) return alert("Add players first!");
      document.getElementById('gameArea').style.display = 'block';
      currentPlayerIndex = 0;
      updateTurn();
    }

    function updateTurn() {
      const player = players[currentPlayerIndex];
      document.getElementById('currentPlayer').innerText = `${player}'s turn`;
      document.getElementById('acceptBtn').disabled = true;
      document.getElementById('skipBtn').disabled = true;
      document.getElementById('nextBtn').disabled = false;
    }

    function nextDare() {
      const player = players[currentPlayerIndex];
      const dareLevel = document.getElementById('dareLevel').value;
      let bank = dareBanks[dareLevel];
      let used = usedDares[dareLevel];

      if (used.size === bank.length) used.clear();

      let dare;
      do {
        dare = bank[Math.floor(Math.random() * bank.length)];
      } while (used.has(dare));
      used.add(dare);

      const otherPlayers = players.filter(p => p !== player);
      const randomTarget = otherPlayers[Math.floor(Math.random() * otherPlayers.length)];
      dare = dare.replace(/someone/g, randomTarget);

      document.getElementById('dareDisplay').innerText = dare;
      document.getElementById('acceptBtn').disabled = false;
      document.getElementById('skipBtn').disabled = skips[player] >= maxSkips;
      document.getElementById('nextBtn').disabled = true;
    }

    function acceptDare() {
      const dare = document.getElementById('dareDisplay').innerText;
      const player = players[currentPlayerIndex];
      logDare(player, dare);
      nextPlayer();
    }

    function skipDare() {
      const dare = document.getElementById('dareDisplay').innerText;
      const player = players[currentPlayerIndex];
      skips[player]++;
      logDare(`${player} skipped`, dare);
      drawHistogram();
      nextPlayer();
    }

    function logDare(player, dare) {
      const history = document.getElementById('dareHistory');
      const entry = document.createElement('li');
      entry.textContent = `${player}: ${dare}`;
      history.appendChild(entry);
    }

    function nextPlayer() {
      currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
      updateTurn();
    }

    function drawHistogram() {
      const histo = document.getElementById('histogram');
      histo.innerHTML = '';
      players.forEach(p => {
        const bar = document.createElement('div');
        bar.className = 'bar';
        bar.style.height = (skips[p] * 20) + 'px';
        bar.title = `${p}: ${skips[p]} skips`;
        histo.appendChild(bar);
      });
    }
  </script>
</body>
</html>
