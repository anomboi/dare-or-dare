<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dare or Dare</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #000;
      color: #fff;
      text-align: center;
      padding: 1rem;
    }
    h1 {
      color: #0ff;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { text-shadow: 0 0 10px #0ff; }
      50% { text-shadow: 0 0 30px #0ff; }
      100% { text-shadow: 0 0 10px #0ff; }
    }
    button {
      font-size: 1.2rem;
      padding: 0.5rem 1rem;
      margin: 0.5rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #111;
      color: #fff;
      transition: all 0.3s ease;
    }
    button:hover {
      background-color: #222;
      box-shadow: 0 0 15px #0ff;
    }
    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .glow {
      animation: glow 1.5s infinite alternate;
    }
    @keyframes glow {
      from { box-shadow: 0 0 5px #f0f, 0 0 10px #f0f; }
      to { box-shadow: 0 0 20px #0ff, 0 0 30px #0ff; }
    }
    .card {
      margin: 2rem auto;
      padding: 2rem;
      border: 2px solid #0ff;
      border-radius: 20px;
      background: #111;
      max-width: 500px;
      transition: transform 0.6s;
      animation: flipIn 1s ease;
    }
    @keyframes flipIn {
      from { transform: rotateY(90deg); opacity: 0; }
      to { transform: rotateY(0deg); opacity: 1; }
    }
    #histogram {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 10px;
      height: 150px;
      margin-bottom: 1rem;
    }
    .bar {
      width: 30px;
      background-color: #f0f;
      text-align: center;
      color: white;
    }
    .bar-label {
      margin-top: 5px;
      font-size: 0.8rem;
    }
  </style>
</head>
<body>
  <h1>Dare or Dare ðŸ”¥</h1>
  <div id="player-setup">
    <textarea id="player-names" placeholder="Enter player names, one per line"></textarea><br/>
    <input type="number" id="max-skips" placeholder="Max skips per player" /><br/>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="game-area" style="display:none;">
    <div>
      <label>Select dare level:</label>
      <select id="dareLevel">
        <option value="mild">Mild</option>
        <option value="spicy">Spicy</option>
        <option value="dangerous">Dangerous</option>
      </select>
    </div>

    <div class="card" id="dare-card"></div>

    <div>
      <button id="nextBtn" onclick="nextDare()">Next</button><br/>
      <button id="acceptBtn" onclick="acceptDare()" disabled>Accept</button>
      <button id="skipBtn" onclick="skipDare()" disabled>Skip</button>
    </div>

    <h2>Skip Histogram</h2>
    <div id="histogram"></div>

    
    <div id="scoreboard"></div>
  </div>

  <button onclick="resetGame()">New Game</button>

  
  <script>
    const dareBanks = {
      mild: [
        "Do a catwalk around the room",
        "Sing the chorus of your favorite pop song",
        "Let someone draw on your arm with lipstick",
        "Do 10 squats while making eye contact with someone",
        "Impersonate a celebrity until someone guesses who it is"
      ],
      spicy: [
        "Let someone put their hand under your shirt for 10 seconds",
        "Kiss someone on the cheek, or lips if you're feeling bold",
        "Take off one piece of clothing",
        "Give someone a lap dance for 10 seconds",
        "Trade shirts with someone for the next round"
      ],
      dangerous: [
        "Let someone put their hand in your underwear for 10 seconds",
        "Dry frottage with someone for 5 seconds",
        "Erection contest with someone: whoever gets hard first loses and strips",
        "Stand completely naked for the next round",
        "Let someone lick your neck or chest for 5 seconds"
      ]
    };

    let allDares = { mild: [], spicy: [], dangerous: [] };
    let usedDares = { mild: new Set(), spicy: new Set(), dangerous: new Set() };
    let players = [];
    let currentPlayerIndex = 0;
    let skips = {};
    let maxSkips = 0;

  function startGame() {
  const playerInput = document.getElementById("playerNames").value;
  players = playerInput.split(",").map(name => name.trim()).filter(name => name !== "");
  currentPlayerIndex = 0;
  skips = {};
  maxSkips = parseInt(document.getElementById("maxSkips").value, 10) || 0;

  const dareLevel = document.getElementById("dareLevel").value;
  const dareList = dareBanks[dareLevel];
  allDares[dareLevel] = [...dareList];
  usedDares[dareLevel] = new Set();

  players.forEach(p => (skips[p] = 0));
  saveGameState();
  nextDare();
}


    function saveGameState() {
  const dareLevel = document.getElementById("dareLevel")?.value || "mild";
  const state = {
    players,
    currentPlayerIndex,
    skips,
    maxSkips,
    dareLevel,
    usedDares: {
      mild: Array.from(usedDares.mild),
      spicy: Array.from(usedDares.spicy),
      dangerous: Array.from(usedDares.dangerous),
    },
  };
  localStorage.setItem("gameState", JSON.stringify(state));
}

function loadGameState() {
  const stateStr = localStorage.getItem("gameState");
  if (!stateStr) return;

  try {
    const state = JSON.parse(stateStr);
    players = state.players || [];
    currentPlayerIndex = state.currentPlayerIndex || 0;
    skips = state.skips || {};
    maxSkips = state.maxSkips || 0;

    document.getElementById("playerNames").value = players.join(", ");
    document.getElementById("maxSkips").value = maxSkips;
    document.getElementById("dareLevel").value = state.dareLevel || "mild";

    usedDares = {
      mild: new Set(state.usedDares?.mild || []),
      spicy: new Set(state.usedDares?.spicy || []),
      dangerous: new Set(state.usedDares?.dangerous || []),
    };

    const dareList = dareBanks[state.dareLevel];
    allDares[state.dareLevel] = [...dareList];
  } catch (e) {
    console.error("Failed to load game state:", e);
  }
}

    
    function nextDare() {
      const dareLevel = document.getElementById("dareLevel").value;
      const player = players[currentPlayerIndex];
      const dareList = allDares[dareLevel];

      if (usedDares[dareLevel].size >= dareList.length) usedDares[dareLevel].clear();

      let newDare;
      do {
        newDare = dareList[Math.floor(Math.random() * dareList.length)];
      } while (usedDares[dareLevel].has(newDare));
      usedDares[dareLevel].add(newDare);

      const otherPlayers = players.filter(p => p !== player);
      const randomTarget = otherPlayers[Math.floor(Math.random() * otherPlayers.length)];
      const personalizedDare = newDare.replace(/someone/g, randomTarget);

      document.getElementById("dare-card").innerText = `${player}, your dare: ${personalizedDare}`;

      document.getElementById("nextBtn").disabled = true;
      document.getElementById("acceptBtn").disabled = false;
      document.getElementById("skipBtn").disabled = skips[player] >= maxSkips;
    }

    function acceptDare() {
      currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
      saveGameState();
      nextTurn();
    }

    function skipDare() {
      const player = players[currentPlayerIndex];
      if (skips[player] < maxSkips) skips[player]++;
      skips[player] = (skips[player] || 0) + 1;
      currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
      saveGameState();
      updateHistogram();
      updateScoreboard();
      nextTurn();
    }

    function nextTurn() {
      currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
      showNextButton();
    }

    function showNextButton() {
      document.getElementById("nextBtn").disabled = false;
      document.getElementById("acceptBtn").disabled = true;
      document.getElementById("skipBtn").disabled = true;
    }

    function updateHistogram() {
      const histogram = document.getElementById("histogram");
      histogram.innerHTML = '';
      players.forEach(player => {
        const barHeight = skips[player] * 20;
        const bar = document.createElement("div");
        bar.className = "bar";
        bar.style.height = `${barHeight}px`;
        bar.innerHTML = `<div>${skips[player]}</div><div class='bar-label'>${player}</div>`;
        histogram.appendChild(bar);
      });
    }

    function updateScoreboard() {
      const board = document.getElementById("scoreboard");
      board.innerHTML = '';
      players.forEach(player => {
        const entry = document.createElement("div");
        entry.innerText = `${player} - Skips: ${skips[player]}`;
        board.appendChild(entry);
      });
    }
  </script>

window.onload = () => {
  loadGameState();
  updateDareHistory();
  if (players.length > 0) {
    nextDare();
  }
};
  
<h2>Dare History</h2>
<div id="dare-history" style="
  max-width: 600px;
  margin: 1rem auto;
  text-align: left;
  max-height: 300px;
  overflow-y: auto;
  border: 2px solid #0ff;
  padding: 1rem;
  border-radius: 10px;
  background-color: rgba(0, 0, 0, 0.5);
  box-shadow: 0 0 20px #0ff;
  color: #fff;
  font-family: 'Orbitron', sans-serif;
">
</div>

<script>
  const dareHistory = [];

  function nextDare() {
    const dareLevel = document.getElementById("dareLevel").value;
    const player = players[currentPlayerIndex];
    const dareList = allDares[dareLevel];

    if (usedDares[dareLevel].size >= dareList.length) usedDares[dareLevel].clear();

    let newDare;
    do {
      newDare = dareList[Math.floor(Math.random() * dareList.length)];
    } while (usedDares[dareLevel].has(newDare));
    usedDares[dareLevel].add(newDare);

    const otherPlayers = players.filter(p => p !== player);
    const randomTarget = otherPlayers[Math.floor(Math.random() * otherPlayers.length)];
    const personalizedDare = newDare.replace(/someone/g, randomTarget);

    document.getElementById("dare-card").innerText = `${player}, your dare: ${personalizedDare}`;

    // Log dare history
    dareHistory.push(`${player} âžœ ${personalizedDare}`);
    updateDareHistory();

    document.getElementById("nextBtn").disabled = true;
    document.getElementById("acceptBtn").disabled = false;
    document.getElementById("skipBtn").disabled = skips[player] >= maxSkips;
  }

  function updateDareHistory() {
    const historyDiv = document.getElementById("dare-history");
    historyDiv.innerHTML = dareHistory
      .map(entry => `<div style="margin-bottom: 5px; text-shadow: 0 0 8px #0ff;">${entry}</div>`)
      .join('');
  }

  function resetGame() {
  if (confirm("Are you sure you want to start a new game? All progress will be lost.")) {
    // Clear variables
    players = [];
    currentPlayerIndex = 0;
    skips = {};
    maxSkips = 0;
    usedDares = {
      mild: new Set(),
      spicy: new Set(),
      dangerous: new Set(),
    };
    // Clear localStorage
    localStorage.removeItem("gameState");

    // Reset UI
    document.getElementById("playerNames").value = "";
    document.getElementById("maxSkips").value = "";
    document.getElementById("dareLevel").value = "mild";
    document.getElementById("dareDisplay").innerText = "";
    document.getElementById("playerTurn").innerText = "";
    document.getElementById("skipCount").innerText = "";
    document.getElementById("dareHistory").innerHTML = "";
  }
}
</script>
</body>
</html>
